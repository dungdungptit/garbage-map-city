{
    "sourceFile": "majestic/Dashboard/js/map1.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1651221998099,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1651222189537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -657,9 +657,9 @@\n             document.getElementById('vehicle-plate').innerHTML = data.data[i].license;\r\n             document.getElementById('information-side-img').innerHTML = \"\";\r\n             $(\"#information-side-img\").append('<img src=\"/majestic/Dashboard/php/api/post/uploads/' + data.data[i].images + '\">');\r\n             oV = {\r\n-                lat: data.data[i].lat,\r\n+                lat: data.data[i].lat,``\r\n                 long: data.data[i].long,\r\n                 markerVehicle: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n                     var side2 = document.getElementById('information-side');\r\n                     side2.style.display = 'flex';\r\n"
                },
                {
                    "date": 1651245749132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -657,13 +657,14 @@\n             document.getElementById('vehicle-plate').innerHTML = data.data[i].license;\r\n             document.getElementById('information-side-img').innerHTML = \"\";\r\n             $(\"#information-side-img\").append('<img src=\"/majestic/Dashboard/php/api/post/uploads/' + data.data[i].images + '\">');\r\n             oV = {\r\n-                lat: data.data[i].lat,``\r\n+                lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerVehicle: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n                     var side2 = document.getElementById('information-side');\r\n                     side2.style.display = 'flex';\r\n+                    \r\n                     // console.log(data.data[i].images);\r\n                 }),\r\n             }\r\n             oV.markerVehicle.setIcon(statVehicle[data.data[i].statuses]);\r\n"
                },
                {
                    "date": 1651246157042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -648,23 +648,22 @@\n     $.getJSON('/majestic/Dashboard/php/api/post/R_vehicle.php', {}, (data) => {\r\n         // console.log(data);\r\n         let body = document.querySelector(\".table tbody\");\r\n         for (let i = 0; i < data.data.length; i++) {\r\n-            document.getElementById('vehicle-id').innerHTML = data.data[i].id;\r\n-            document.getElementById('vehicle-lat').innerHTML = data.data[i].lat;\r\n-            document.getElementById('vehicle-long').innerHTML = data.data[i].long;\r\n-            document.getElementById('vehicle-status').innerHTML = data.data[i].statuses;\r\n-            document.getElementById('vehicle-address').innerHTML = data.data[i].addresses;\r\n-            document.getElementById('vehicle-plate').innerHTML = data.data[i].license;\r\n-            document.getElementById('information-side-img').innerHTML = \"\";\r\n-            $(\"#information-side-img\").append('<img src=\"/majestic/Dashboard/php/api/post/uploads/' + data.data[i].images + '\">');\r\n             oV = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerVehicle: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n                     var side2 = document.getElementById('information-side');\r\n                     side2.style.display = 'flex';\r\n-                    \r\n+                    document.getElementById('vehicle-id').innerHTML = data.data[i].id;\r\n+                    document.getElementById('vehicle-lat').innerHTML = data.data[i].lat;\r\n+                    document.getElementById('vehicle-long').innerHTML = data.data[i].long;\r\n+                    document.getElementById('vehicle-status').innerHTML = data.data[i].statuses;\r\n+                    document.getElementById('vehicle-address').innerHTML = data.data[i].addresses;\r\n+                    document.getElementById('vehicle-plate').innerHTML = data.data[i].license;\r\n+                    document.getElementById('information-side-img').innerHTML = \"\";\r\n+                    $(\"#information-side-img\").append('<img src=\"/majestic/Dashboard/php/api/post/uploads/' + data.data[i].images + '\">');\r\n                     // console.log(data.data[i].images);\r\n                 }),\r\n             }\r\n             oV.markerVehicle.setIcon(statVehicle[data.data[i].statuses]);\r\n"
                },
                {
                    "date": 1651246251045,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -662,9 +662,8 @@\n                     document.getElementById('vehicle-address').innerHTML = data.data[i].addresses;\r\n                     document.getElementById('vehicle-plate').innerHTML = data.data[i].license;\r\n                     document.getElementById('information-side-img').innerHTML = \"\";\r\n                     $(\"#information-side-img\").append('<img src=\"/majestic/Dashboard/php/api/post/uploads/' + data.data[i].images + '\">');\r\n-                    // console.log(data.data[i].images);\r\n                 }),\r\n             }\r\n             oV.markerVehicle.setIcon(statVehicle[data.data[i].statuses]);\r\n             objVehicle.push(oV.markerVehicle);\r\n"
                },
                {
                    "date": 1651246258589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -660,9 +660,9 @@\n                     document.getElementById('vehicle-long').innerHTML = data.data[i].long;\r\n                     document.getElementById('vehicle-status').innerHTML = data.data[i].statuses;\r\n                     document.getElementById('vehicle-address').innerHTML = data.data[i].addresses;\r\n                     document.getElementById('vehicle-plate').innerHTML = data.data[i].license;\r\n-                    document.getElementById('information-side-img').innerHTML = \"\";\r\n+                    document.getElementById('information-side-img').innerHTML = \"\"; \r\n                     $(\"#information-side-img\").append('<img src=\"/majestic/Dashboard/php/api/post/uploads/' + data.data[i].images + '\">');\r\n                 }),\r\n             }\r\n             oV.markerVehicle.setIcon(statVehicle[data.data[i].statuses]);\r\n"
                },
                {
                    "date": 1651247308482,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -652,8 +652,9 @@\n             oV = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerVehicle: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n+                    \r\n                     var side2 = document.getElementById('information-side');\r\n                     side2.style.display = 'flex';\r\n                     document.getElementById('vehicle-id').innerHTML = data.data[i].id;\r\n                     document.getElementById('vehicle-lat').innerHTML = data.data[i].lat;\r\n"
                },
                {
                    "date": 1651247327535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -630,8 +630,9 @@\n             oB = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerBin: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n+                    \r\n                     var side2 = document.getElementById('information-side-2');\r\n                     side2.style.display = 'flex';\r\n                     document.getElementById('bin-id').innerHTML = data.data[i].id;\r\n                     document.getElementById('bin-lat').innerHTML = data.data[i].lat;\r\n"
                },
                {
                    "date": 1651247334815,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -630,9 +630,9 @@\n             oB = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerBin: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n-                    \r\n+                    map.setView()\r\n                     var side2 = document.getElementById('information-side-2');\r\n                     side2.style.display = 'flex';\r\n                     document.getElementById('bin-id').innerHTML = data.data[i].id;\r\n                     document.getElementById('bin-lat').innerHTML = data.data[i].lat;\r\n"
                },
                {
                    "date": 1651247410207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -630,9 +630,9 @@\n             oB = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerBin: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n-                    map.setView()\r\n+                    map.setView(e.latlng, 18);\r\n                     var side2 = document.getElementById('information-side-2');\r\n                     side2.style.display = 'flex';\r\n                     document.getElementById('bin-id').innerHTML = data.data[i].id;\r\n                     document.getElementById('bin-lat').innerHTML = data.data[i].lat;\r\n@@ -653,9 +653,9 @@\n             oV = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerVehicle: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n-                    \r\n+                    map.setView(e.latlng, 18);\r\n                     var side2 = document.getElementById('information-side');\r\n                     side2.style.display = 'flex';\r\n                     document.getElementById('vehicle-id').innerHTML = data.data[i].id;\r\n                     document.getElementById('vehicle-lat').innerHTML = data.data[i].lat;\r\n"
                },
                {
                    "date": 1651247734797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -630,9 +630,9 @@\n             oB = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerBin: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n-                    map.setView(e.latlng, 18);\r\n+                    map.setView(e.latlng, 17);\r\n                     var side2 = document.getElementById('information-side-2');\r\n                     side2.style.display = 'flex';\r\n                     document.getElementById('bin-id').innerHTML = data.data[i].id;\r\n                     document.getElementById('bin-lat').innerHTML = data.data[i].lat;\r\n@@ -653,9 +653,9 @@\n             oV = {\r\n                 lat: data.data[i].lat,\r\n                 long: data.data[i].long,\r\n                 markerVehicle: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n-                    map.setView(e.latlng, 18);\r\n+                    map.setView(e.latlng, 17);\r\n                     var side2 = document.getElementById('information-side');\r\n                     side2.style.display = 'flex';\r\n                     document.getElementById('vehicle-id').innerHTML = data.data[i].id;\r\n                     document.getElementById('vehicle-lat').innerHTML = data.data[i].lat;\r\n"
                }
            ],
            "date": 1651221998099,
            "name": "Commit-0",
            "content": "var dataHN1234 = [[21.0419, 105.821],\r\n[21.04188, 105.82111],\r\n[21.04186, 105.82137],\r\n[21.04183, 105.82157],\r\n[21.04182, 105.82168],\r\n[21.04179, 105.82188],\r\n[21.04173, 105.82209],\r\n[21.04165, 105.82235],\r\n[21.04158, 105.82258],\r\n[21.04156, 105.82263],\r\n[21.04155, 105.82265],\r\n[21.04147, 105.82285],\r\n[21.04143, 105.82296],\r\n[21.04141, 105.82301],\r\n[21.04129, 105.82333],\r\n[21.0412, 105.82351],\r\n[21.04114, 105.82361],\r\n[21.04113, 105.82365],\r\n[21.04105, 105.82384],\r\n[21.041, 105.82393],\r\n[21.0409, 105.82425],\r\n[21.04085, 105.82441],\r\n[21.04083, 105.82444],\r\n[21.04077, 105.82462],\r\n[21.04076, 105.82463],\r\n[21.0407, 105.8248],\r\n[21.04066, 105.82491],\r\n[21.04057, 105.82516],\r\n[21.04052, 105.82529],\r\n[21.04045, 105.82548],\r\n[21.0404, 105.82562],\r\n[21.04037, 105.82576],\r\n[21.04031, 105.82595],\r\n[21.04023, 105.82618],\r\n[21.04019, 105.8263],\r\n[21.04016, 105.82637],\r\n[21.04009, 105.82653],\r\n[21.04007, 105.82656],\r\n[21.04, 105.82671],\r\n[21.03995, 105.82683],\r\n[21.03986, 105.82702],\r\n[21.03983, 105.82708],\r\n[21.03977, 105.82731],\r\n[21.03972, 105.82748],\r\n[21.03965, 105.82769],\r\n[21.03959, 105.82802],\r\n[21.03952, 105.82841],\r\n[21.03952, 105.8285],\r\n[21.03953, 105.8286],\r\n[21.03957, 105.82871],\r\n[21.03957, 105.82871],\r\n[21.03946, 105.82874],\r\n[21.03921, 105.82882],\r\n[21.03918, 105.82883],\r\n[21.03881, 105.829],\r\n[21.03866, 105.82904],\r\n[21.03841, 105.82913],\r\n[21.03839, 105.8292],\r\n[21.03836, 105.82925],\r\n[21.03823, 105.82966],\r\n[21.03818, 105.82972],\r\n[21.03806, 105.82977],\r\n[21.03785, 105.82976],\r\n[21.03776, 105.8299],\r\n[21.03776, 105.83003],\r\n[21.03776, 105.8302],\r\n[21.03775, 105.83051],\r\n[21.03777, 105.83096],\r\n[21.03772, 105.83102],\r\n[21.03767, 105.83105],\r\n[21.03755, 105.83109],\r\n[21.03751, 105.83109],\r\n[21.03747, 105.83109],\r\n[21.0374, 105.83109],\r\n[21.03712, 105.8311],\r\n[21.03677, 105.8311],\r\n[21.03657, 105.8311],\r\n[21.0365, 105.83112],\r\n[21.03637, 105.83116],\r\n[21.03621, 105.83121],\r\n[21.03596, 105.83129],\r\n[21.03583, 105.83133],\r\n[21.03525, 105.83149],\r\n[21.03512, 105.83153],\r\n[21.03495, 105.83159],\r\n[21.03486, 105.83162],\r\n[21.03481, 105.83163],\r\n[21.0347, 105.83167],\r\n[21.03466, 105.83167],\r\n[21.03452, 105.8317],\r\n[21.03446, 105.83171],\r\n[21.03446, 105.83171],\r\n[21.03442, 105.83162],\r\n[21.03442, 105.83157],\r\n[21.03446, 105.83083],\r\n[21.03448, 105.83052],\r\n[21.03448, 105.83045],\r\n[21.03449, 105.83027],\r\n[21.03453, 105.82988],\r\n[21.03454, 105.82975],\r\n[21.03454, 105.82963],\r\n[21.03457, 105.82924],\r\n[21.03459, 105.82906],\r\n[21.03461, 105.82883],\r\n[21.03461, 105.82873],\r\n[21.03462, 105.8286],\r\n[21.03463, 105.8285],\r\n[21.03463, 105.82849],\r\n[21.03464, 105.82837],\r\n[21.03465, 105.82828],\r\n[21.03465, 105.82826],\r\n[21.03465, 105.82825],\r\n[21.03466, 105.82809],\r\n[21.03467, 105.82804],\r\n[21.03467, 105.828],\r\n[21.03467, 105.82795],\r\n[21.03468, 105.82789],\r\n[21.0347, 105.8276],\r\n[21.03471, 105.82746],\r\n[21.03472, 105.82733],\r\n[21.03472, 105.82717],\r\n[21.03475, 105.82697],\r\n[21.03476, 105.82678],\r\n[21.03478, 105.82662],\r\n[21.03483, 105.82607],\r\n[21.03484, 105.82599],\r\n[21.03485, 105.82574],\r\n[21.03486, 105.82566],\r\n[21.03487, 105.82559],\r\n[21.03488, 105.82536],\r\n[21.03489, 105.82532],\r\n[21.03489, 105.82526],\r\n[21.0349, 105.82513],\r\n[21.03491, 105.82497],\r\n[21.03491, 105.82493],\r\n[21.03491, 105.82488],\r\n[21.03493, 105.82467],\r\n[21.03494, 105.82457],\r\n[21.03494, 105.82451],\r\n[21.03495, 105.82441],\r\n[21.03497, 105.82411],\r\n[21.03499, 105.8239],\r\n[21.03506, 105.82336],\r\n[21.03506, 105.82329],\r\n[21.03507, 105.82319],\r\n[21.03508, 105.8231],\r\n[21.03509, 105.82297],\r\n[21.03509, 105.82293],\r\n[21.03509, 105.8229],\r\n[21.0351, 105.82279],\r\n[21.0351, 105.82271],\r\n[21.03511, 105.82261],\r\n[21.03513, 105.82235],\r\n[21.03514, 105.8223],\r\n[21.03514, 105.82224],\r\n[21.03514, 105.82222],\r\n[21.03515, 105.82213],\r\n[21.03516, 105.82199],\r\n[21.03516, 105.82196],\r\n[21.03517, 105.82181],\r\n[21.03518, 105.82169],\r\n[21.03519, 105.82156],\r\n[21.03519, 105.82148],\r\n[21.0352, 105.8214],\r\n[21.03523, 105.82101],\r\n[21.03524, 105.82082],\r\n[21.03527, 105.8203],\r\n[21.03527, 105.8203],\r\n[21.03541, 105.82032],\r\n[21.03559, 105.82034],\r\n[21.03613, 105.82038],\r\n[21.03635, 105.8204],\r\n[21.03659, 105.8204],\r\n[21.03685, 105.82043],\r\n[21.03705, 105.82045],\r\n[21.03723, 105.82048],\r\n[21.03856, 105.82064],\r\n[21.03874, 105.82066],\r\n[21.03879, 105.82071],\r\n[21.03882, 105.82076],\r\n[21.03884, 105.82082],\r\n[21.03884, 105.82088],\r\n[21.03884, 105.82095],\r\n[21.03883, 105.82102],\r\n[21.03882, 105.8211],\r\n[21.03881, 105.82119],\r\n[21.0388, 105.82131],\r\n[21.03874, 105.82193],\r\n[21.03873, 105.82211],\r\n[21.0387, 105.82263],\r\n[21.03864, 105.82287],\r\n[21.03844, 105.82336],\r\n[21.03836, 105.82362],\r\n[21.03831, 105.82387],\r\n[21.0383, 105.82391],\r\n[21.03828, 105.82404],\r\n[21.03827, 105.82422],\r\n[21.03827, 105.82436],\r\n[21.03827, 105.82449],\r\n[21.03826, 105.82461],\r\n[21.03825, 105.82471],\r\n[21.03823, 105.82481],\r\n[21.0382, 105.82494],\r\n[21.03818, 105.82501],\r\n[21.03818, 105.82501],\r\n[21.0382, 105.82501]\r\n];\r\nvar dataHN85012 = [\r\n    [21.03063, 105.81699],\r\n    [21.03065, 105.81716],\r\n    [21.03067, 105.81726],\r\n    [21.03067, 105.81726],\r\n    [21.03086, 105.81722],\r\n    [21.03086, 105.81722],\r\n    [21.03088, 105.81735],\r\n    [21.03097, 105.818],\r\n    [21.03097, 105.818],\r\n    [21.03108, 105.81798],\r\n    [21.03112, 105.81798],\r\n    [21.03112, 105.81798],\r\n    [21.03114, 105.81814],\r\n    [21.03128, 105.81913],\r\n    [21.03131, 105.81938],\r\n    [21.03135, 105.81965],\r\n    [21.03138, 105.81983],\r\n    [21.0314, 105.81997],\r\n    [21.03142, 105.8201],\r\n    [21.03146, 105.82037],\r\n    [21.03148, 105.82047],\r\n    [21.0315, 105.82063],\r\n    [21.03155, 105.82101],\r\n    [21.03155, 105.82101],\r\n    [21.03158, 105.82118],\r\n    [21.03165, 105.82121],\r\n    [21.0318, 105.82138],\r\n    [21.0318, 105.82138],\r\n    [21.0316, 105.8215],\r\n    [21.03148, 105.82157],\r\n    [21.03131, 105.82166],\r\n    [21.03115, 105.82169],\r\n    [21.03108, 105.82172],\r\n    [21.03077, 105.82202],\r\n    [21.03065, 105.82213],\r\n    [21.03037, 105.82243],\r\n    [21.03026, 105.82254],\r\n    [21.03018, 105.82261],\r\n    [21.03003, 105.82276],\r\n    [21.02991, 105.82288],\r\n    [21.02948, 105.82329],\r\n    [21.02934, 105.82342],\r\n    [21.02916, 105.82359],\r\n    [21.0291, 105.82364],\r\n    [21.02906, 105.82368],\r\n    [21.02902, 105.82371],\r\n    [21.02898, 105.82375],\r\n    [21.02876, 105.82395],\r\n    [21.02871, 105.82399],\r\n    [21.0285, 105.82418],\r\n    [21.02835, 105.82431],\r\n    [21.02792, 105.82469],\r\n    [21.02783, 105.82476],\r\n    [21.02783, 105.82476],\r\n    [21.02805, 105.82503],\r\n    [21.02825, 105.82528],\r\n    [21.02841, 105.82551],\r\n    [21.02871, 105.82595],\r\n    [21.02871, 105.82595],\r\n    [21.02856, 105.82607],\r\n    [21.02846, 105.82593],\r\n    [21.02841, 105.82586],\r\n    [21.02825, 105.82564],\r\n    [21.02811, 105.82547],\r\n    [21.02773, 105.82497],\r\n    [21.02773, 105.82497],\r\n    [21.02763, 105.82484],\r\n    [21.02763, 105.82484],\r\n    [21.02756, 105.82491],\r\n    [21.02735, 105.82509],\r\n    [21.02717, 105.82527],\r\n    [21.02697, 105.82557],\r\n    [21.02686, 105.82574],\r\n    [21.02679, 105.82589],\r\n    [21.02666, 105.82619],\r\n    [21.02655, 105.8265],\r\n    [21.02653, 105.82656],\r\n    [21.02643, 105.82688],\r\n    [21.02635, 105.82712],\r\n    [21.02621, 105.82752],\r\n    [21.02621, 105.82752],\r\n    [21.02636, 105.82756],\r\n    [21.02636, 105.82756],\r\n    [21.02632, 105.82772],\r\n    [21.02632, 105.82772],\r\n    [21.02649, 105.82777],\r\n    [21.02653, 105.8278],\r\n    [21.02668, 105.82786],\r\n    [21.02672, 105.82786],\r\n    [21.02672, 105.82786],\r\n    [21.02679, 105.82788],\r\n    [21.02687, 105.82786],\r\n    [21.02687, 105.82786],\r\n    [21.02694, 105.82793],\r\n    [21.02705, 105.82807],\r\n    [21.02736, 105.82871],\r\n    [21.02749, 105.82898],\r\n    [21.02755, 105.82911],\r\n    [21.02769, 105.82943],\r\n    [21.02774, 105.82963],\r\n    [21.02765, 105.83019],\r\n    [21.0276, 105.83058],\r\n    [21.02753, 105.83105],\r\n    [21.02753, 105.8312],\r\n    [21.02755, 105.83132],\r\n    [21.02758, 105.83144],\r\n    [21.02762, 105.83151],\r\n    [21.02766, 105.83154],\r\n    [21.02801, 105.83161],\r\n    [21.02819, 105.83165],\r\n    [21.02819, 105.83165],\r\n    [21.02813, 105.83189],\r\n    [21.02813, 105.83189]\r\n]\r\nvar dataHN859 = [[21.03155, 105.83629],\r\n[21.03117, 105.83622],\r\n[21.03061, 105.83612],\r\n[21.03061, 105.83612],\r\n[21.03051, 105.83613],\r\n[21.03045, 105.83613],\r\n[21.03037, 105.83609],\r\n[21.03028, 105.83603],\r\n[21.03005, 105.83585],\r\n[21.02999, 105.83581],\r\n[21.02999, 105.83581],\r\n[21.02997, 105.83584],\r\n[21.02996, 105.83587],\r\n[21.02991, 105.83599],\r\n[21.0297, 105.83591],\r\n[21.0297, 105.83591],\r\n[21.02966, 105.83602],\r\n[21.02958, 105.83628],\r\n[21.0295, 105.83652],\r\n[21.02946, 105.83663],\r\n[21.02944, 105.83672],\r\n[21.02944, 105.83672],\r\n[21.02872, 105.83644],\r\n[21.02872, 105.83644],\r\n[21.0287, 105.83657],\r\n[21.02864, 105.83692],\r\n[21.02863, 105.83701],\r\n[21.02862, 105.83709],\r\n[21.02856, 105.8374],\r\n[21.02846, 105.83791],\r\n[21.02843, 105.83803],\r\n[21.0284, 105.83821],\r\n[21.02838, 105.83832],\r\n[21.02835, 105.83845],\r\n[21.02826, 105.83877],\r\n[21.02815, 105.83916],\r\n[21.02791, 105.84004],\r\n[21.02776, 105.84046],\r\n[21.02776, 105.8405],\r\n[21.02772, 105.84079],\r\n[21.02767, 105.84121],\r\n[21.02764, 105.84142],\r\n[21.02763, 105.84151],\r\n[21.02763, 105.84151],\r\n[21.0275, 105.84151],\r\n[21.02664, 105.84149],\r\n[21.02649, 105.84149],\r\n[21.02614, 105.8415],\r\n[21.0261, 105.8415],\r\n[21.02602, 105.8415],\r\n[21.02602, 105.8415],\r\n[21.02602, 105.84145],\r\n[21.02603, 105.84107],\r\n[21.02603, 105.84107],\r\n[21.02602, 105.84145],\r\n[21.02602, 105.8415],\r\n[21.02602, 105.8415],\r\n[21.0261, 105.8415],\r\n[21.02614, 105.8415],\r\n[21.02649, 105.84149],\r\n[21.02664, 105.84149],\r\n[21.0275, 105.84151],\r\n[21.02763, 105.84151],\r\n[21.02772, 105.84152],\r\n[21.02818, 105.84153],\r\n[21.02868, 105.84153],\r\n[21.02882, 105.84154],\r\n[21.02896, 105.84154],\r\n[21.02947, 105.84155],\r\n[21.02958, 105.84157],\r\n[21.02975, 105.84159],\r\n[21.02989, 105.84162],\r\n[21.03011, 105.84166],\r\n[21.03011, 105.84166],\r\n[21.03023, 105.84156],\r\n[21.03038, 105.84144],\r\n[21.03054, 105.84132],\r\n[21.03064, 105.84121],\r\n[21.03091, 105.8409],\r\n[21.03105, 105.84076],\r\n[21.03109, 105.84067],\r\n[21.03127, 105.8405],\r\n[21.03133, 105.84044],\r\n[21.03133, 105.84044],\r\n[21.03142, 105.84046],\r\n[21.03205, 105.84058],\r\n[21.0324, 105.84064],\r\n[21.0328, 105.84072],\r\n[21.03285, 105.84072],\r\n[21.03285, 105.84072],\r\n[21.03279, 105.84104],\r\n[21.03279, 105.84104]];\r\nvar idHN1234 = \"HN1234\",\r\n    idHN85012 = \"HN85012\",\r\n    idHN859 = \"HN859\";\r\nfunction updateService(dataTemporary, id) {\r\n    // let id = \"HN1234\";\r\n    for (let i = 0; i < dataTemporary.length; i++) {\r\n        // console.log(dataTemporary[i][0], dataTemporary[i][1]);\r\n        setTimeout(function () {\r\n            $.getJSON(\"/majestic/Dashboard/php/api/post/update_service.php\", {\r\n                id: id,\r\n                lat: dataTemporary[i][0],\r\n                long: dataTemporary[i][1]\r\n            }, function (data) {\r\n                // console.log(data);\r\n            });\r\n        }, 500 * i);\r\n    }\r\n}\r\nupdateService(dataHN1234, idHN1234),\r\n    updateService(dataHN85012, idHN85012),\r\n    updateService(dataHN859, idHN859);\r\n\r\n\r\n\r\nvar cities = L.layerGroup();\r\nvar mLittleton = L.marker([21.1227, 105.7532], { icon: iconRed }).bindPopup('This is Littleton, CO.').addTo(cities);\r\nvar mDenver = L.marker([21.0046, 105.8529], { icon: iconRed }).bindPopup('This is Denver, CO.').addTo(cities);\r\nvar mAurora = L.marker([21.1108, 105.852], { icon: iconRed }).bindPopup('This is Aurora, CO.').addTo(cities);\r\nvar mGolden = L.marker([21.05285, 105.852], { icon: iconRed }).bindPopup('This is Golden, CO.').addTo(cities);\r\n\r\nvar mbAttr = 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>';\r\nvar mbUrl = 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';\r\n\r\nvar grayscale = L.tileLayer(mbUrl, { id: 'mapbox/light-v9', tileSize: 512, zoomOffset: -1, attribution: mbAttr });\r\nvar streets = L.tileLayer(mbUrl, { id: 'mapbox/streets-v11', tileSize: 512, zoomOffset: -1, attribution: mbAttr });\r\nvar outdoors = L.tileLayer(mbUrl, { id: 'mapbox/outdoors-v11', tileSize: 512, zoomOffset: -1, attribution: mbAttr });\r\n\r\nvar mylayers = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n})\r\nvar googleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {\r\n    maxZoom: 20,\r\n    subdomains: ['mt0', 'mt1', 'mt2', 'mt3']\r\n});\r\n// Hybrid: s,h;\r\n// Satellite: s;\r\n// Streets: m;\r\n// Terrain: p;\r\nvar map = L.map('map', {\r\n    center: [21.57201, 105.61388],\r\n    maxZoom: 20,\r\n    layers: [streets]\r\n});\r\n\r\nvar polyHN1234 = L.polyline(dataHN1234).addTo(map);\r\nvar polyHN85012 = L.polyline(dataHN85012).addTo(map);\r\nvar polyHN859 = L.polyline(dataHN859).addTo(map);\r\n\r\nmap.setView([21.037181, 105.833485], 15);\r\n\r\nvar baseLayers = {\r\n    'Grayscale': grayscale,\r\n    'Streets': streets,\r\n    'Outdoors': outdoors,\r\n    'MyLayers': mylayers,\r\n    'Google Streets': googleStreets\r\n};\r\n\r\nvar overlays = {\r\n    'Cities': cities\r\n};\r\n\r\n// var layerControl = L.control.layers(baseLayers, overlays).addTo(map);\r\nvar layerControl = L.control.layers(baseLayers).addTo(map);\r\n\r\nvar iconRed = L.icon({\r\n    iconUrl: './images/red-garbage.png',\r\n    iconSize: [25, 41],\r\n});\r\nvar iconGreen = L.icon({\r\n    iconUrl: './images/green-garbage.png',\r\n    iconSize: [25, 41],\r\n});\r\nvar iconYellow = L.icon({\r\n    iconUrl: './images/yellow-garbage.png',\r\n    iconSize: [25, 41],\r\n});\r\nvar iconVehicleRed = L.icon({\r\n    iconUrl: './images/red-vehicle.png',\r\n    iconSize: [35, 16],\r\n});\r\nvar iconVehicleGreen = L.icon({\r\n    iconUrl: './images/green-vehicle.png',\r\n    iconSize: [35, 16],\r\n});\r\n\r\n(function () {\r\n    // save these original methods before they are overwritten\r\n    var proto_initIcon = L.Marker.prototype._initIcon;\r\n    var proto_setPos = L.Marker.prototype._setPos;\r\n\r\n    var oldIE = (L.DomUtil.TRANSFORM === 'msTransform');\r\n\r\n    L.Marker.addInitHook(function () {\r\n        var iconOptions = this.options.icon && this.options.icon.options;\r\n        var iconAnchor = iconOptions && this.options.icon.options.iconAnchor;\r\n        if (iconAnchor) {\r\n            iconAnchor = (iconAnchor[0] + 'px ' + iconAnchor[1] + 'px');\r\n        }\r\n        this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center center';\r\n        this.options.rotationAngle = this.options.rotationAngle || 0;\r\n\r\n        // Ensure marker keeps rotated during dragging\r\n        this.on('drag', function (e) { e.target._applyRotation(); });\r\n    });\r\n\r\n    L.Marker.include({\r\n        _initIcon: function () {\r\n            proto_initIcon.call(this);\r\n        },\r\n\r\n        _setPos: function (pos) {\r\n            proto_setPos.call(this, pos);\r\n            this._applyRotation();\r\n        },\r\n\r\n        _applyRotation: function () {\r\n            if (this.options.rotationAngle) {\r\n                this._icon.style[L.DomUtil.TRANSFORM + 'Origin'] = this.options.rotationOrigin;\r\n\r\n                if (oldIE) {\r\n                    // for IE 9, use the 2D rotation\r\n                    this._icon.style[L.DomUtil.TRANSFORM] = 'rotate(' + this.options.rotationAngle + 'deg)';\r\n                    // this._icon.style[L.DomUtil.TRANSITION] = 'all 1s linear';\r\n                } else {\r\n                    // for modern browsers, prefer the 3D accelerated version\r\n                    this._icon.style[L.DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';\r\n                    // this._icon.style[L.DomUtil.TRANSITION] = 'all 1s linear';\r\n                }\r\n            }\r\n        },\r\n\r\n        setRotationAngle: function (angle) {\r\n            this.options.rotationAngle = angle;\r\n            this.update();\r\n            return this;\r\n        },\r\n\r\n        setRotationOrigin: function (origin) {\r\n            this.options.rotationOrigin = origin;\r\n            this.update();\r\n            return this;\r\n        }\r\n    });\r\n})();\r\n\r\n\r\nfunction _getAngle(startx, starty, endx, endy) {\r\n    var tan = 0\r\n    if (endx == startx) {\r\n        tan = 90;\r\n    } else {\r\n        tan = Math.atan(Math.abs((endy - starty) / (endx - startx))) * 180 / Math.PI;\r\n        // console.log(tan);\r\n    }\r\n\r\n    if (endx >= startx && endy >= starty) //First quadrant\r\n    {\r\n        return -tan;\r\n    } else if (endx > startx && endy < starty) //Delta Quadrant\r\n    {\r\n        return tan;\r\n    } else if (endx < startx && endy > starty) //Beta Quadrant\r\n    {\r\n        return tan - 180;\r\n    } else {\r\n        return 180 - tan; //third quadrant\r\n    }\r\n}\r\n\r\n\r\nvar statBin = {\r\n    \"full\": iconRed,\r\n    \"empty\": iconGreen,\r\n    \"mid\": iconYellow,\r\n};\r\nvar statVehicle = {\r\n    \"Free\": iconVehicleRed,\r\n    \"On work\": iconVehicleGreen,\r\n};\r\n\r\nobjLatlngs = [];\r\n$.getJSON('/majestic/Dashboard/php/api/post/R_vehicle.php', {}, (data) => {\r\n    let body = document.querySelector(\".table tbody\");\r\n    for (let i = 0; i < data.data.length; i++) {\r\n        let oV = {\r\n            lat: data.data[i].lat,\r\n            long: data.data[i].long,\r\n            angle: 0\r\n        }\r\n        objLatlngs.push(oV);\r\n    }\r\n});\r\n// console.log(objLatlngs);\r\n\r\nvar objBin = [];\r\nvar objVehicle = [];\r\nvar layerGrBin, layerGrVehicle;\r\nvar oB = new Object();\r\nvar oV = new Object();\r\nsetInterval(function () {\r\n    objBin = [];\r\n    $.getJSON('/majestic/Dashboard/php/api/post/R_bin.php', {}, (data) => {\r\n\r\n        for (let i = 0; i < data.data.length; i++) {\r\n            oB = {\r\n                lat: data.data[i].lat,\r\n                long: data.data[i].long,\r\n                markerBin: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n                    var side2 = document.getElementById('information-side-2');\r\n                    side2.style.display = 'flex';\r\n                    document.getElementById('bin-id').innerHTML = data.data[i].id;\r\n                    document.getElementById('bin-lat').innerHTML = data.data[i].lat;\r\n                    document.getElementById('bin-long').innerHTML = data.data[i].long;\r\n                    document.getElementById('bin-status').innerHTML = data.data[i].statuses;\r\n                    document.getElementById('bin-address').innerHTML = data.data[i].addresses;\r\n                }),\r\n            };\r\n            oB.markerBin.setIcon(statBin[data.data[i].statuses]);\r\n            objBin.push(oB.markerBin);\r\n        }\r\n    });\r\n    objVehicle = [];\r\n    $.getJSON('/majestic/Dashboard/php/api/post/R_vehicle.php', {}, (data) => {\r\n        // console.log(data);\r\n        let body = document.querySelector(\".table tbody\");\r\n        for (let i = 0; i < data.data.length; i++) {\r\n            document.getElementById('vehicle-id').innerHTML = data.data[i].id;\r\n            document.getElementById('vehicle-lat').innerHTML = data.data[i].lat;\r\n            document.getElementById('vehicle-long').innerHTML = data.data[i].long;\r\n            document.getElementById('vehicle-status').innerHTML = data.data[i].statuses;\r\n            document.getElementById('vehicle-address').innerHTML = data.data[i].addresses;\r\n            document.getElementById('vehicle-plate').innerHTML = data.data[i].license;\r\n            document.getElementById('information-side-img').innerHTML = \"\";\r\n            $(\"#information-side-img\").append('<img src=\"/majestic/Dashboard/php/api/post/uploads/' + data.data[i].images + '\">');\r\n            oV = {\r\n                lat: data.data[i].lat,\r\n                long: data.data[i].long,\r\n                markerVehicle: L.marker([data.data[i].lat, data.data[i].long]).addEventListener('click', function (e) {\r\n                    var side2 = document.getElementById('information-side');\r\n                    side2.style.display = 'flex';\r\n                    // console.log(data.data[i].images);\r\n                }),\r\n            }\r\n            oV.markerVehicle.setIcon(statVehicle[data.data[i].statuses]);\r\n            objVehicle.push(oV.markerVehicle);\r\n        }\r\n    });\r\n    setTimeout(function () {\r\n        for (let i = 0; i < objVehicle.length; i++) {\r\n            if (objVehicle[i]._latlng.lat !== objLatlngs[i].lat || objVehicle[i]._latlng.lng !== objLatlngs[i].long) {\r\n                let angle = _getAngle(objLatlngs[i].long, objLatlngs[i].lat, objVehicle[i]._latlng.lng, objVehicle[i]._latlng.lat);\r\n                objVehicle[i].setRotationAngle(angle);\r\n                objVehicle[i].setRotationOrigin(17 + 'px ' + 8 + 'px');\r\n                objLatlngs[i].angle = angle;\r\n                objLatlngs[i].lat = objVehicle[i]._latlng.lat;\r\n                objLatlngs[i].long = objVehicle[i]._latlng.lng;\r\n                // console.log(\"Update\");\r\n            }\r\n            if (objVehicle[i].options.rotationAngle == 0) {\r\n                objVehicle[i].setRotationAngle(objLatlngs[i].angle);\r\n                objVehicle[i].setRotationOrigin(17 + 'px ' + 8 + 'px');\r\n            }\r\n            // console.log(objVehicle[i].options.rotationAngle);\r\n        }\r\n        if (layerGrBin) {\r\n            map.removeLayer(layerGrBin);\r\n        }\r\n        if (layerGrVehicle) {\r\n            map.removeLayer(layerGrVehicle);\r\n        }\r\n        layerGrBin = L.layerGroup(objBin).addTo(map);\r\n        layerGrVehicle = L.layerGroup(objVehicle).addTo(map);\r\n\r\n    }, 300);\r\n}, 500);\r\n\r\nvar closeSide2 = document.getElementById('information-side-close-2');\r\nvar closeSide = document.getElementById('information-side-close');\r\ncloseSide.addEventListener('click', function (e) {\r\n    var side = document.getElementById('information-side');\r\n    side.style.display = 'none';\r\n});\r\ncloseSide2.addEventListener('click', function (e) {\r\n    var side2 = document.getElementById('information-side-2');\r\n    side2.style.display = 'none';\r\n});\r\n\r\nmap.addEventListener('click', function (e) {\r\n    console.log(e.latlng.lat, e.latlng.lng);\r\n});"
        }
    ]
}